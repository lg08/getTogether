{% extends 'base.html' %}
{% load custom_tags %}
{% load crispy_forms_tags %}


{% block title%}
    <title>Post Detail</title>

{% endblock %}

{% block body %}




    <div class="container">
        <center>
            <h1> {{ post.title }} </h1>
        </center>
        <br/>
        <p>
            {{post.message}}
        </p>

        <hr/>

        <h1>Comments:</h1>


        <!-- recursive comment revealing -->
        {% create_stack post.post_comments.all as commentstack %}
        {% create_stack post.post_comments.all as commentstackcopy %}
        {% for number in  commentstackcopy %}
            {% include 'posts/comment.html' %}
        {% endfor %}


        <form
            action="{% url "posts:create_comment" subcomment=0 postpk=post.pk commentpk=0 %}"
            method="POST"
            class="collapse show multi-collapse"
            id="initial_modal" >

            {{ comment_form|crispy }}
            {% csrf_token %}
            <button
                type="submit"
                class="btn btn-secondary">
                Submit
            </button>
        </form>

    </div>

{% endblock %}
